
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>一个小女生的LUA游戏开发日志（2）对话测试</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    </head>

    <body style="margin-top:1.618%">
        <div class="container">
            <div class="row">
                <div class="jumbotron">
                    <h1 class="display-5">一个小女生的LUA游戏开发日志（2）对话测试</h1>
                </div>
                <br />
                <nav class="nav">
                    <a class="nav-link active" aria-current="page" href="index_17.html">返回</a>
                </nav>
            </div>

            <hr class="my-4" />
<div class="row">
<div class="col-2">
<p><b>掌叔</b><br/>
2009-01-19 10:39:18</p>
</div>
<div class="col-10">
<p>摘自：[url]http://371397938.qzone.qq.com/[/url]<br />作者：×ㄨ┆花苼糖<br /><br />- -~~挺晚了~但今天事情今天做，还是得写上来，<br />今天认识了一位朋友，愿意一块参加 很高兴，而且他是做美术的哦。^_^<br />感谢他的支持和鼓励！对了~他还要为这个游戏写剧本。那可就是原创咯！！那他也得加油呀！<br />言归正传：<br />今天研究的是对话系统，照旧，先看函数<br />[code=lua]<br />1.function my.Dialogbox(x,y,name,str,visible)<br />           if visible == 1  then<br />           my.print(x,y,my.dialogboximg)<br />           zhPrint(x+20,y+5,name,screen)<br />           zhPrint(x+18,y+25,str,screen)<br />           end<br />  end<br />[/code]<br />这是对话框函数。首先my.dialogboximg 已经是加载好的图片数据变量<br />这个：<br /><br />[attach]628[/attach]<br /><br />（挺难看的，太晚了嘛，再加上我是PS小菜鸟，2分钟做一个测试咯！）<br />函数解释 my.Dialogbox(对话框显示X坐标，有坐标，对话框人物姓名，内容，是否可见)<br />EG.<br />[code=lua]<br />my.Dialogbox(15,5,"NANA","我的名字是NANA"，1)<br />[/code]<br /><br />在开一个NPC的函数的脚本（挺粗糙的！ ）<br />[code=lua]<br />npc[9001001]={}<br />npc[9001001].img={}<br />npc[9001001].img.stand=my.loadimg("img/NPC/9001001/eye.0.png")<br />npc[9001001].x=50<br />npc[9001001].y=200<br />npc[9001001].xbox=0<br />npc[9001001].num=0  --对话的行数<br />npc[9001001].str={<br />    "我是NPC9001001，现在你正在点我！",<br />    "我的名字是雄英",<br />    "那时候我和别人打赌，结果我输了，所以我吧名字倒过来写了！",<br />    "嘿嘿，没办法嘛！",<br />     }<br /><br />function npc9001001()<br />my.print(npc[9001001].x,npc[9001001].y,npc[9001001].img.stand)<br />if x0<=50+60 and x0>=50 and y0 <=279 and y0>=200 and pad:circle() and oldpad:circle() ~= pad:circle() then<br />npc[9001001].xbox=1<br />npc[9001001].num=npc[9001001].num+1<br />if npc[9001001].num >4 then npc[9001001].num=1 npc[9001001].xbox=0 end<br />end<br />if npc[9001001].xbox==1 then<br />my.Dialogbox(15,10,"9001001",npc[9001001].str[npc[9001001].num],1)<br />end<br />end<br />[/code]<br />很难读吧- -|明天考虑任何改写。代码里的X0，Y0 是模拟垫的坐标，看效果吧。 首先是进入运行<br /><br />[attach]629[/attach]<br /><br />FPS只能达到11 ~~真不理想，有待优化。<br />我们去点一下那只小熊！！<br /><br />[attach]630[/attach]<br /><br />在点点那个女孩！<br /><br />[attach]631[/attach]<br /><br />效果出来了，不过有如下缺点：<br />1.对话框出现后FPS下降。<br />  分析，一位dilaogbox函数 每次循环都要加载并且显示对话框背景，消耗时间太长。<br />在这个程序里 类似的情况还比较多！<br />解决方法：需要吧一些经常使用的资源加载倒内存以后不释放。即可。<br /><br /><br />从剩余内存来看，空间是多了不少。<br />看来<br />时间换空间，空间换时间 的理念还真管用^_^<br />睡觉~明天 也要加油哇~~~~HOHOHOHOHO~~~加油加油！！！</p>
</div>
</div>


            
            <div class="row">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-center">
                    <!--<li class="page-item disabled">
                        <a class="page-link">Previous</a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">Next</a>
                    </li>
                        -->
                        <li class="page-item active">
<a class="page-link" href="post16875_1.html">1</a>
</li>


                    </ul>
                </nav>
            </div>
        </div>


        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    </body>
</html>

