
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>[脚本]NPC头上显示人名+人物跟随RMXP用</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    </head>

    <body style="margin-top:1.618%">
        <div class="container">
            <div class="row">
                <div class="jumbotron">
                    <h1 class="display-5">[脚本]NPC头上显示人名+人物跟随RMXP用</h1>
                </div>
                <br />
                <nav class="nav">
                    <a class="nav-link active" aria-current="page" href="index_9.html">返回</a>
                </nav>
            </div>

            <hr class="my-4" />
<div class="row">
<div class="col-2">
<p><b>love_xiaolu</b><br/>
2010-09-22 20:25:58</p>
</div>
<div class="col-10">
<p>[i=s] 本帖最后由 love_xiaolu 于 2010-9-22 20:33 编辑 [/i]<br /><br />本人收集的一些加强脚本，自己看着办吧！来自66RPG~~[code]#===================================================================<br /># 本脚本来自www.66RPG.com，使用和转载请保留此信息<br />#===================================================================<br /># ————————————————————————————————————<br /># ▼▲▼ XRXS13. パーティ列車移動 ver.1.02 ▼▲▼<br /># by fukuyama<br />#<br /># Train_Actor<br />#<br /># fukuyama@alles.or.jp<br /># http://www4.big.or.jp/~fukuyama/rgss/Train_Actor.txt<br />#<br />module Train_Actor<br /><br />  #是否使用停止跟随的方法，也就是说，这里false改为true的时候，如果TRANSPARENT_SWITCHES_INDEX<br />  #开关打开，跟随的人物就消失了（其实只是变成透明而已）<br />  TRANSPARENT_SWITCH = false<br />  TRANSPARENT_SWITCHES_INDEX = 20<br />  #举例：第一个为true，第二个为20，则打开20号开关，后面的人都没了。<br /><br />  #跟随人数的最大数目，可以更改为2、3什么的。<br />  TRAIN_ACTOR_SIZE_MAX = 4<br /><br />  # 定数<br />  #Input::DOWN = 2<br />  #Input::LEFT = 4<br />  #Input::RIGHT = 6<br />  #Input::UP = 6<br />  DOWN_LEFT = 1<br />  DOWN_RIGHT = 3<br />  UP_LEFT = 7<br />  UP_RIGHT = 9<br />  JUMP = 5<br /><br />  class Game_Party_Actor < Game_Character<br />    <br />    def initialize<br />        super()<br /><br />        @through = true<br />    end<br />      <br />    def setup(actor)<br /><br />        # キャラクターのファイル名と色相を設定<br />        if actor != nil<br />           @character_name = actor.character_name<br />           @character_hue = actor.character_hue<br />           @tempneme = actor.name           <br />        else<br />           @character_name = ""<br />           @character_hue = 0<br />           @tempneme = ""       <br />        end<br />        # 不透明度と合成方法を初期化<br />        @opacity = 255<br />        @blend_type = 0<br />    end<br /><br />    def screen_z(height = 0)<br />        if .x == @x and .y == @y<br />           return .screen_z(height) - 1<br />        end<br />        super(height)<br />    end<br />    <br />    def name<br />        return @tempneme<br />    end<br />    <br />    #--------------------------------------------------------------------------<br />    # ● 下に移動<br />    # turn_enabled : その場での向き変更を許可するフラグ<br />    #--------------------------------------------------------------------------<br />    def move_down(turn_enabled = true)<br />        # 下を向く<br />        if turn_enabled<br />           turn_down<br />        end<br />        # 通行可能な場合<br />        if passable?(@x, @y, Input::DOWN)<br />           # 下を向く<br />           turn_down<br />           # 座標を更新<br />           @y += 1<br />        end<br />    end<br />#--------------------------------------------------------------------------<br /># ● 左に移動<br /># turn_enabled : その場での向き変更を許可するフラグ<br />#--------------------------------------------------------------------------<br />def move_left(turn_enabled = true)<br /># 左を向く<br />if turn_enabled<br />turn_left<br />end<br /># 通行可能な場合<br />if passable?(@x, @y, Input::LEFT)<br /># 左を向く<br />turn_left<br /># 座標を更新<br />@x -= 1<br />end<br />end<br />#--------------------------------------------------------------------------<br /># ● 右に移動<br /># turn_enabled : その場での向き変更を許可するフラグ<br />#--------------------------------------------------------------------------<br />def move_right(turn_enabled = true)<br /># 右を向く<br />if turn_enabled<br />turn_right<br />end<br /># 通行可能な場合<br />if passable?(@x, @y, Input::RIGHT)<br /># 右を向く<br />turn_right<br /># 座標を更新<br />@x += 1<br />end<br />end<br />#--------------------------------------------------------------------------<br /># ● 上に移動<br /># turn_enabled : その場での向き変更を許可するフラグ<br />#--------------------------------------------------------------------------<br />def move_up(turn_enabled = true)<br /># 上を向く<br />if turn_enabled<br />turn_up<br />end<br /># 通行可能な場合<br />if passable?(@x, @y, Input::UP)<br /># 上を向く<br />turn_up<br /># 座標を更新<br />@y -= 1<br />end<br />end<br />#--------------------------------------------------------------------------<br /># ● 左下に移動<br />#--------------------------------------------------------------------------<br />def move_lower_left<br /># 向き固定でない場合<br />unless @direction_fix<br /># 右向きだった場合は左を、上向きだった場合は下を向く<br />@direction = (@direction == Input::RIGHT ? Input::LEFT : @direction == Input::UP ? Input::DOWN : @direction)<br />end<br /># 下→左、左→下 のどちらかのコースが通行可能な場合<br />if (passable?(@x, @y, Input::DOWN) and passable?(@x, @y + 1, Input::LEFT)) or<br />(passable?(@x, @y, Input::LEFT) and passable?(@x - 1, @y, Input::DOWN))<br /># 座標を更新<br />@x -= 1<br />@y += 1<br />end<br />end<br />#--------------------------------------------------------------------------<br /># ● 右下に移動<br />#--------------------------------------------------------------------------<br />def move_lower_right<br /># 向き固定でない場合<br />unless @direction_fix<br /># 左向きだった場合は右を、上向きだった場合は下を向く<br />@direction = (@direction == Input::LEFT ? Input::RIGHT : @direction == Input::UP ? Input::DOWN : @direction)<br />end<br /># 下→右、右→下 のどちらかのコースが通行可能な場合<br />if (passable?(@x, @y, Input::DOWN) and passable?(@x, @y + 1, Input::RIGHT)) or<br />(passable?(@x, @y, Input::RIGHT) and passable?(@x + 1, @y, Input::DOWN))<br /># 座標を更新<br />@x += 1<br />@y += 1<br />end<br />end<br />#--------------------------------------------------------------------------<br /># ● 左上に移動<br />#--------------------------------------------------------------------------<br />def move_upper_left<br /># 向き固定でない場合<br />unless @direction_fix<br /># 右向きだった場合は左を、下向きだった場合は上を向く<br />@direction = (@direction == Input::RIGHT ? Input::LEFT : @direction == Input::DOWN ? Input::UP : @direction)<br />end<br /># 上→左、左→上 のどちらかのコースが通行可能な場合<br />if (passable?(@x, @y, Input::UP) and passable?(@x, @y - 1, Input::LEFT)) or<br />(passable?(@x, @y, Input::LEFT) and passable?(@x - 1, @y, Input::UP))<br /># 座標を更新<br />@x -= 1<br />@y -= 1<br />end<br />end<br />#--------------------------------------------------------------------------<br /># ● 右上に移動<br />#--------------------------------------------------------------------------<br />def move_upper_right<br /># 向き固定でない場合<br />unless @direction_fix<br /># 左向きだった場合は右を、下向きだった場合は上を向く<br />@direction = (@direction == Input::LEFT ? Input::RIGHT : @direction == Input::DOWN ? Input::UP : @direction)<br />end<br /># 上→右、右→上 のどちらかのコースが通行可能な場合<br />if (passable?(@x, @y, Input::UP) and passable?(@x, @y - 1, Input::RIGHT)) or<br />(passable?(@x, @y, Input::RIGHT) and passable?(@x + 1, @y, Input::UP))<br /># 座標を更新<br />@x += 1<br />@y -= 1<br />end<br />end<br />attr_writer :move_speed<br />attr_writer :step_anime<br />end<br />module Spriteset_Map_Module<br />def setup_actor_character_sprites?<br />return @setup_actor_character_sprites_flag != nil<br />end<br />def setup_actor_character_sprites(characters)<br />if !setup_actor_character_sprites?<br />index_game_player = 0<br />@character_sprites.each_index do |i|<br />if @character_sprites[i].character.instance_of?(Game_Player)<br />index_game_player = i<br />break<br />end<br />end<br />for character in characters.reverse<br />@character_sprites.unshift(<br />Sprite_Character.new(@viewport1, character)<br />)<br />end<br />@setup_actor_character_sprites_flag = true<br />end<br />end<br />end<br />module Scene_Map_Module<br />def setup_actor_character_sprites(characters)<br />@spriteset.setup_actor_character_sprites(characters)<br />end<br />end<br />module Game_Party_Module<br />def set_transparent_actors(transparent)<br />@transparent = transparent<br />end<br />def setup_actor_character_sprites<br />if @characters == nil<br />@characters = []<br />for i in 1 ... TRAIN_ACTOR_SIZE_MAX<br />@characters.push(Game_Party_Actor.new)<br />end<br />end<br />for i in 1 ... TRAIN_ACTOR_SIZE_MAX<br />@characters[i - 1].setup(actors[i])<br />end<br />if .class.method_defined?('setup_actor_character_sprites')<br />.setup_actor_character_sprites(@characters)<br />end<br />end<br />def update_party_actors<br />setup_actor_character_sprites<br />transparent = .transparent<br />if transparent == false<br />if TRANSPARENT_SWITCH<br />transparent = <br />end<br />end<br />for character in @characters<br />character.transparent = transparent<br />character.move_speed = .move_speed<br />character.step_anime = .step_anime<br />character.update<br />end<br />end<br />def moveto_party_actors( x, y )<br />setup_actor_character_sprites<br />for character in @characters<br />character.moveto( x, y )<br />end<br />if @move_list == nil<br />@move_list = []<br />end<br />move_list_setup<br />end<br />def move_party_actors<br />if @move_list == nil<br />@move_list = []<br />move_list_setup<br />end<br />@move_list.each_index do |i|<br />if @characters[i] != nil<br />case @move_list[i].type<br />when Input::DOWN<br />@characters[i].move_down(@move_list[i].args[0])<br />when Input::LEFT<br />@characters[i].move_left(@move_list[i].args[0])<br />when Input::RIGHT<br />@characters[i].move_right(@move_list[i].args[0])<br />when Input::UP<br />@characters[i].move_up(@move_list[i].args[0])<br />when DOWN_LEFT<br />@characters[i].move_lower_left<br />when DOWN_RIGHT<br />@characters[i].move_lower_right<br />when UP_LEFT<br />@characters[i].move_upper_left<br />when UP_RIGHT<br />@characters[i].move_upper_right<br />when JUMP<br />@characters[i].jump(@move_list[i].args[0],@move_list[i].args[1])<br />end<br />end<br />end<br />end<br />class Move_List_Element<br />def initialize(type,args)<br />@type = type<br />@args = args<br />end<br />def type() return @type end<br />def args() return @args end<br />end<br />def move_list_setup<br />for i in 0 .. TRAIN_ACTOR_SIZE_MAX<br />@move_list[i] = nil<br />end<br />end<br />def add_move_list(type,*args)<br />@move_list.unshift(Move_List_Element.new(type,args)).pop<br />end<br />def move_down_party_actors(turn_enabled = true)<br />move_party_actors<br />add_move_list(Input::DOWN,turn_enabled)<br />end<br />def move_left_party_actors(turn_enabled = true)<br />move_party_actors<br />add_move_list(Input::LEFT,turn_enabled)<br />end<br />def move_right_party_actors(turn_enabled = true)<br />move_party_actors<br />add_move_list(Input::RIGHT,turn_enabled)<br />end<br />def move_up_party_actors(turn_enabled = true)<br />move_party_actors<br />add_move_list(Input::UP,turn_enabled)<br />end<br />def move_lower_left_party_actors<br />move_party_actors<br />add_move_list(DOWN_LEFT)<br />end<br />def move_lower_right_party_actors<br />move_party_actors<br />add_move_list(DOWN_RIGHT)<br />end<br />def move_upper_left_party_actors<br />move_party_actors<br />add_move_list(UP_LEFT)<br />end<br />def move_upper_right_party_actors<br />move_party_actors<br />add_move_list(UP_RIGHT)<br />end<br />def jump_party_actors(x_plus, y_plus)<br />move_party_actors<br />add_move_list(JUMP,x_plus, y_plus)<br />end<br />end<br />module Game_Player_Module<br />def update<br />.update_party_actors<br />super<br />end<br />def moveto( x, y )<br />.moveto_party_actors( x, y )<br />super( x, y )<br />end<br />def move_down(turn_enabled = true)<br />if passable?(@x, @y, Input::DOWN)<br />.move_down_party_actors(turn_enabled)<br />end<br />super(turn_enabled)<br />end<br />def move_left(turn_enabled = true)<br />if passable?(@x, @y, Input::LEFT)<br />.move_left_party_actors(turn_enabled)<br />end<br />super(turn_enabled)<br />end<br />def move_right(turn_enabled = true)<br />if passable?(@x, @y, Input::RIGHT)<br />.move_right_party_actors(turn_enabled)<br />end<br />super(turn_enabled)<br />end<br />def move_up(turn_enabled = true)<br />if passable?(@x, @y, Input::UP)<br />.move_up_party_actors(turn_enabled)<br />end<br />super(turn_enabled)<br />end<br />def move_lower_left<br /># 下→左、左→下 のどちらかのコースが通行可能な場合<br />if (passable?(@x, @y, Input::DOWN) and passable?(@x, @y + 1, Input::LEFT)) or<br />(passable?(@x, @y, Input::LEFT) and passable?(@x - 1, @y, Input::DOWN))<br />.move_lower_left_party_actors<br />end<br />super<br />end<br />def move_lower_right<br /># 下→右、右→下 のどちらかのコースが通行可能な場合<br />if (passable?(@x, @y, Input::DOWN) and passable?(@x, @y + 1, Input::RIGHT)) or<br />(passable?(@x, @y, Input::RIGHT) and passable?(@x + 1, @y, Input::DOWN))<br />.move_lower_right_party_actors<br />end<br />super<br />end<br />def move_upper_left<br /># 上→左、左→上 のどちらかのコースが通行可能な場合<br />if (passable?(@x, @y, Input::UP) and passable?(@x, @y - 1, Input::LEFT)) or<br />(passable?(@x, @y, Input::LEFT) and passable?(@x - 1, @y, Input::UP))<br />.move_upper_left_party_actors<br />end<br />super<br />end<br />def move_upper_right<br /># 上→右、右→上 のどちらかのコースが通行可能な場合<br />if (passable?(@x, @y, Input::UP) and passable?(@x, @y - 1, Input::RIGHT)) or<br />(passable?(@x, @y, Input::RIGHT) and passable?(@x + 1, @y, Input::UP))<br />.move_upper_right_party_actors<br />end<br />super<br />end<br />def jump(x_plus, y_plus)<br /># 新しい座標を計算<br />new_x = @x + x_plus<br />new_y = @y + y_plus<br /># 加算値が (0,0) の場合か、ジャンプ先が通行可能な場合<br />if (x_plus == 0 and y_plus == 0) or passable?(new_x, new_y, 0)<br />.jump_party_actors(x_plus, y_plus)<br />end<br />super(x_plus, y_plus)<br />end<br />attr_reader :move_speed<br />attr_reader :step_anime<br />end<br />end # module Train_Actor<br />class Game_Party<br />include Train_Actor::Game_Party_Module<br />end<br />class Game_Player<br />include Train_Actor::Game_Player_Module<br />end<br />class Spriteset_Map<br />include Train_Actor::Spriteset_Map_Module<br />end<br />class Scene_Map<br />include Train_Actor::Scene_Map_Module<br />end<br /><br />#==================================================================<br /># 本脚本来自www.66RPG.com，使用和转载请保留此信息<br />#==================================================================<br />[/code]</p>
</div>
</div>


            
            <div class="row">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-center">
                    <!--<li class="page-item disabled">
                        <a class="page-link">Previous</a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">Next</a>
                    </li>
                        -->
                        <li class="page-item active">
<a class="page-link" href="post8243_1.html">1</a>
</li>


                    </ul>
                </nav>
            </div>
        </div>


        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    </body>
</html>

