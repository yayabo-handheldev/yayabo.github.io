
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>【教程17】nge2工具函数-遍历目录</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    </head>

    <body style="margin-top:1.618%">
        <div class="container">
            <div class="row">
                <div class="jumbotron">
                    <h1 class="display-5">【教程17】nge2工具函数-遍历目录</h1>
                </div>
                <br />
                <nav class="nav">
                    <a class="nav-link active" aria-current="page" href="index_1.html">返回</a>
                </nav>
            </div>

            <hr class="my-4" />
<div class="row">
<div class="col-2">
<p><b>掌叔</b><br/>
2009-05-08 16:42:00</p>
</div>
<div class="col-10">
<p>摘自：[url]www.iacger.com[/url]<br />作者：newcreat<br /><br />将libnge2更新到r157，可以使用新加的辅助函数dir遍历.<br /><br />[url]http://www.iacger.com/topoc/download/[/url]<br /><br />对一个文件夹下的目录及其子目录进行遍历 <br /><br />[code=c]<br />/** <br />* 目录遍历访问函数,只支持英文路径和文件名. <br />* 注意在PSP上全小写的文件名会以全部大写显示. <br />*@param const char* directory, 待访问目录名 <br />*@param file_travel_cb callback, 访问回调函数 <br />*@param void* user_data,用户参数 <br />*@return int ,返回值0,1 <br />*/ <br />int io_dir_travel(const char* directory, file_travel_cb callback,void* user_data); <br /><br /><br /><br />实例：注意这里是用的printf。所以请用英文文件名或者目录<br /><br /> <br />#include "libnge2.h" <br />#include "nge_io_dir.h" <br /><br />void mycall(dir_desc_p dir_desc,void* data) <br />{ <br />if(dir_desc!=NULL){ <br />if(dir_desc->flag == FIO_F_FILE) <br />printf("[FILE]t%sn",dir_desc->name); <br />else if(dir_desc->flag == FIO_F_DIR){ <br />printf("[DIR ]t%sn",dir_desc->name); <br />} <br />} <br />} <br /><br /><br />extern "C" <br />int main(int argc,char* argv[]) <br />{ <br /><br />io_dir_travel(".",mycall,NULL); <br />nge_sleep(200000); <br />return 1; <br />} <br />[/code]<br /><br />显示情况(具体与你的目录文件里内容相关)：<br />[FILE] ./Debug/main.obj<br />[FILE] ./Debug/nge_dir_io.obj<br />[FILE] ./Debug/test.exe<br />[FILE] ./Debug/test.ilk<br />[FILE] ./Debug/test.pch<br />[FILE] ./Debug/test.pdb<br />[FILE] ./Debug/vc60.idb<br />[FILE] ./Debug/vc60.pdb<br />[DIR ] ./Debug<br />[FILE] ./EBOOT.PBP<br />[FILE] ./main.cpp<br />[FILE] ./main.cpp.bak<br />[FILE] ./Makefile<br />[FILE] ./nge_dir_io.c<br />[FILE] ./nge_dir_io.h<br />[DIR ] ./Release<br />[FILE] ./test.dsp<br />[FILE] ./test.dsw<br />[FILE] ./test.exe<br />[FILE] ./test.ncb<br />[FILE] ./test.opt<br />[FILE] ./test.plg</p>
</div>
</div>


            
            <div class="row">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-center">
                    <!--<li class="page-item disabled">
                        <a class="page-link">Previous</a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">Next</a>
                    </li>
                        -->
                        <li class="page-item active">
<a class="page-link" href="post412_1.html">1</a>
</li>


                    </ul>
                </nav>
            </div>
        </div>


        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    </body>
</html>

